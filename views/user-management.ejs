<!DOCTYPE html>
<html lang="en">
  <%- include("./partials/head.ejs") %>

  <body>
    <div class="wrapper">
      <%- include("./partials/nav.ejs") %>

      <header class="header" role="banner" aria-label="The Top">
        <%- include("./partials/nav.ejs") %>

        <section class="section__img">
          <img src="/svg/icon/all_users.svg" alt="svg image" />
        </section>

        <main class="[ flow ] [ main ]">
          <h1 class="main__heading">ALL USERS</h1>
          <h2 class="main__sub"><strong>User</strong> Profiles</h2>
          <a
            class="main__button"
            href="/api/v1/admin/users?page=1&sortBy=createdAt"
            ><span>[Button]</span></a
          >
        </main>

        <!--Waves Container-->
        <%- include("./partials/waves.ejs") %>
        <!--Waves end-->
      </header>

      <!-- <section id="insta_nav">
        <div class="insta_nav">
          <nav class="content__sidebar-inner">
            <h2>Summary</h2>
            <ul id="table-of-contents"></ul>
          </nav>
        </div>
      </section> -->

      <article id="article">
        <section class="section">
          <div class="container">
            <form action="" method="POST">
              <table class="table">
                <thead class="thead thead-dark">
                  <tr>
                    <th>ID</th>
                    <th>Username</th>
                    <th>Email</th>
                    <th>Role</th>
                    <th>Status</th>
                    <th></th>
                  </tr>
                </thead>
                <tbody class="tbody">
                  <% users.forEach(user => { %>
                  <tr>
                    <td><%= user.id %></td>
                    <td><%= user.username %></td>
                    <td><%= user.email %></td>
                    <% if (user.roles.length === 1) { %>
                    <td>User</td>
                    <% } else if (user.roles.length === 2) { %>
                    <td>Writer</td>
                    <% } else { %>
                    <td>Admin</td>
                    <% } %>
                    <td><%= user.status %></td>
                    <td>
                      <a href="/api/v1/admin/users/<%= user._id %>">Profile</a>
                      <%- include("./partials/deleteForm.ejs", { url:
                      `/api/v1/admin/users/${user._id}`, name: `Delete` }) %>
                    </td>
                  </tr>
                  <% }) %>
                </tbody>
              </table>
            </form>
          </div>
        </section>
      </article>

      <%- include('partials/footer'); -%>
    </div>
    <script src="/js/main.js" type="module"></script>
  </body>
</html>
